#! /usr/local/bin/perl

#  Copyright 2008, by the California Institute of Technology.  ALL RIGHTS
#  RESERVED. United States Government Sponsorship acknowledged. Any commercial
#  use must be negotiated with the Office of Technology Transfer at the
#  California Institute of Technology.
#
# $Id$
# DO NOT EDIT THE LINE ABOVE - IT IS AUTOMATICALLY GENERATED BY CM

#
# Function email an operator of error in the MODIS and L2P Processing.
#
# Assumption:
#
#   1) TBD 
#
#------------------------------------------------------------------------------------------------

use File::Basename;  # Use in parsing the full file name.

$GHRSST_PERL_LIB_DIRECTORY = $ENV{GHRSST_PERL_LIB_DIRECTORY};
do "$GHRSST_PERL_LIB_DIRECTORY/get_error_file_registry_filename.pl";

sub email_ops_to_report_error {
    
    # Get input.
    my $ref_error_message = shift;

    # Dereference the input.
    my @l_error_message = @$ref_error_message;

    # Write the message to a file.
    my $message = join(" ",@l_error_message);
    my $mail_file = "$ENV{'EMPTY_EMAIL_LOCATION'}/email_ops_error_report_$ENV{'RANDOM_NUMBER'}.txt";
    open(fh, ">", $mail_file);
    print fh $message;
    close(fh) or "ERROR: Could not close file to send email error.";

    # Send the error email.
    system("$ENV{'GHRSST_SHELL_LIB_DIRECTORY'}/email_ops_to_report_error.csh");

}