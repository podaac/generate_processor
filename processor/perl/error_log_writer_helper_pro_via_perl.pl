#!/usr/local/bin/perl

#  Copyright 2008, by the California Institute of Technology.  ALL RIGHTS
#  RESERVED. United States Government Sponsorship acknowledged. Any commercial
#  use must be negotiated with the Office of Technology Transfer at the
#  California Institute of Technology.
#
# $Id$
# DO NOT EDIT THE LINE ABOVE - IT IS AUTOMATICALLY GENERATED BY CM

# Function allows another Perl function to report an error in the MODIS and MAF processing.
#
# Assumptions:
#
#   1) The IDL codes has already been compiled into a .sav file.
#   2) The environment variable SCRATCH_AREA has been defined.
#   3) The global variable $GHRSST_PERL_LIB_DIRECTORY has been defined.
#
#------------------------------------------------------------------------------------------------

sub error_log_writer_helper_pro_via_perl {

    # Get input(s):

    my $i_calle_name   = shift;
    my $i_error_reason = shift; 

    # Set running time.

    my $begin_processing_time = localtime;
    my $l_time_start = time();

    # Set the argument and the runtime flag.

    my $idl_argument_strings = "-args \"$i_calle_name\" \"$i_error_reason\" ";
    my $rt_flag = "-quiet -rt=$GHRSST_PERL_LIB_DIRECTORY/error_log_writer_helper_pro.sav";

    # Set the system command string.

    my $call_system_command_str = "/usr/local/bin/idl  $rt_flag $idl_argument_strings";

    # Do the unit test calling IDL to pass in the two parameters.

    system("$call_system_command_str") == 0
            or die "error_log_writer_helper_pro_via_perl : $call_system_command_str failed: $?";

    my $l_end_time = time(); 
    my $l_elapsed_seconds = $l_end_time - $l_time_start;
    my $end_processing_time = localtime;

    # Print running statistics.

#    print "error_log_writer_helper_pro_via_perl: begin_processing_time = $begin_processing_time\n";
#    print "error_log_writer_helper_pro_via_perl: end_processing_time   = $end_processing_time\n";
#    print "error_log_writer_helper_pro_via_perl: elapsed               = $l_elapsed_seconds seconds\n";

    # ---------- Close up shop ----------
}
