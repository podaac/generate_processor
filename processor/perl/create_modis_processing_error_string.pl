#!/usr/local/bin/perl

#  Copyright 2008, by the California Institute of Technology.  ALL RIGHTS
#  RESERVED. United States Government Sponsorship acknowledged. Any commercial
#  use must be negotiated with the Office of Technology Transfer at the
#  California Institute of Technology.
#
# $Id$
# DO NOT EDIT THE LINE ABOVE - IT IS AUTOMATICALLY GENERATED BY CM

#
# Subroutine create a string so it can be email to the operator in case there was
# an error in MODIS processing.
#
# Assumption:
#
#   1) TBD. 
#
#------------------------------------------------------------------------------------------------

do "$GHRSST_PERL_LIB_DIRECTORY/get_error_file_registry_filename.pl";

sub create_modis_processing_error_string {

    # Returned status.  Value of 0 means ok, 1 means bad.

    my $o_status = 0;

    #
    # Get input.
    #

    my $l_uncompressed_data_filename   = shift;  # Full path to uncompressed data file.
    my $l_l2p_core_name_only_filename  = shift;  # The name only of the L2P Core.
    my $i_processing_type              = shift;  # Either QUICKLOOK or REFINED

    #
    # Create the error message.
    #

    my @r_error_message = ();
    my $line = 0;
    $r_error_message[$line++] = "\n";
    $r_error_message[$line++] = "You are receiving this message because there was an error in MODIS L2P Processing.\n";
    $r_error_message[$line++] = "Please do not reply to the email.\n";
    $r_error_message[$line++] = "\n";
    $r_error_message[$line++] = "The following file is either corrupted or could not be copied:\n";  
    $r_error_message[$line++] = "\n";
    $r_error_message[$line++] = "    $l_uncompressed_data_filename\n";  
    $r_error_message[$line++] = "\n";
    $r_error_message[$line++] = "The error has been reported to Error File Registry (EFR):\n";
    $r_error_message[$line++] = "\n";
    $r_error_message[$line++] = "   " . get_error_file_registry_filename($i_processing_type) . "\n";
    $r_error_message[$line++] = "\n";
    $r_error_message[$line++] = "with the following L2P name:\n"; 
    $r_error_message[$line++] = "\n";
    $r_error_message[$line++] = "  $l_l2p_core_name_only_filename\n";
    $r_error_message[$line++] = "\n";
    $r_error_message[$line++] = "If the file was corrupted, please re-pull the file, then manually remove the entry from the EFR\n";
    $r_error_message[$line++] = "so it can be picked up to be processed again.\n";
    $r_error_message[$line++] = "If the file could not be copied, simply remove the entry from the EFR.\n";
    $r_error_message[$line++] = "\n";

    # ---------- Close up shop ----------
    return (\@r_error_message);

} # end sub create_modis_processing_error_string
